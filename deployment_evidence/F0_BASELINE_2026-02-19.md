# F0 BASELINE - Operation_Web-1

Fecha: 2026-02-19  
Owner: Agente Web + Auditor  
Entorno: Local Repo Snapshot (pre-F1)

## 1) Estado Git
- Branch: `main`
- HEAD: `e18e6faab34ea7ed320c7c6e52a9f9b959b25776`
- Observacion: hay cambios locales pendientes; no iniciar F1 en produccion sin branch de trabajo.

## 2) Baseline funcional (codigo)
1. Login v1 con captcha obligatorio:
   - `OperationWeb.API/Controllers/AuthController.cs:53`
   - `OperationWeb.API/Controllers/AuthController.cs:63`
   - `OperationWeb.API/Controllers/AuthController.cs:66`
2. Endpoint captcha:
   - `OperationWeb.API/Controllers/AuthController.cs:247`
3. Health endpoint:
   - `OperationWeb.API/Program.cs:210`
4. Hardening API-only:
   - `OperationWeb.API/Program.cs:186`
   - `OperationWeb.API/Program.cs:217`
5. Attendance check-in actual:
   - `OperationWeb.API/Controllers/AttendanceController.cs:73`
   - `OperationWeb.Business/Services/AttendanceService.cs:24`

## 3) Baseline de datos (codigo mapeado)
1. Tabla `ASISTENCIA_DIARIA` mapeada:
   - `OperationWeb.Core/Entities/AsistenciaDiaria.cs:7`
2. Contexto legacy `Opera_Main`:
   - `OperationWeb.DataAccess/OperaMainDbContext.cs:6`
   - `OperationWeb.DataAccess/OperaMainDbContext.cs:14`
   - `OperationWeb.DataAccess/OperaMainDbContext.cs:15`

## 4) Brecha SGO confirmada para arranque F1
1. No existe `Dispositivos_Vinculados` en el codigo actual.
2. Login no recibe `DeviceId` en `LoginRequest`:
   - `OperationWeb.API/Controllers/AuthController.cs:46`
3. No existe validacion de binding por dispositivo.

## 5) Comandos runtime obligatorios (servidor) para cerrar F0
Ejecutar en PowerShell de servidor antes de iniciar F1:

```powershell
Set-Location "C:\Apps\Operation_Web"
docker compose -f .\docker-compose.prod.yml ps
curl.exe -i "http://127.0.0.1:5132/health"
curl.exe -i "http://127.0.0.1:5132/api/v1/auth/captcha"
curl.exe -i "http://127.0.0.1:5132/api/auth/captcha"
```

Esperado:
1. `health` => `200`
2. `/api/v1/auth/captcha` => `200`
3. `/api/auth/captcha` => `404`

## 6) Dictamen F0
- Estado: `GO` para iniciar F1 en entorno de pruebas.
- Condicion: crear branch de implementacion SGO y no tocar produccion hasta pasar pruebas de F1.
